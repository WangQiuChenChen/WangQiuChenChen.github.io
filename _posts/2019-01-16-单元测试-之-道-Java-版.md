---
title: "《单元测试之道Java版》的读书笔记"
excerpt: ""
categories:
- Reading
tags:
- 单元测试
- 笔记
- 方法论
- Java
create_at: 2019-01-16
last_modified_at: 2019-01-17
toc: true
toc_label: "文章提纲"
---

## 总览
这是本相对简单的书，书中采用的JUnit的版本也是旧的，但是在新的JUnit4下稍做修改依然可以运行。重要的是通过这本书了解JUnit在Java的单元测试中是如何使用的。

## 第2章 首个单元测试
计划你的测试：测试不是无中生有的，也不是意想天开的。是根据需要一点点添加的，帮助自己尽早地发现思考上的误区。参看这章给出的例子，原来理所当然正确的，结果不一定是正确的。

## 第3章 使用JUnit编写测试
### 3.1 构建单元测试
测试代码必须要做的几件事情：
* 准备测试的条件（创建对象、分配资源等等）
* 调用测试的方法
* 验证测试方法的行为与期望是否相符
* 测试结束后清理现场（释放资源等等）
### 3.2 JUnit的各种断言
断言：JUnit提供的辅助函数，帮助你确认被测试函数是否正确运行。

后面还介绍了（3.5 JUnit的自定义断言）

### 3.3 JUnit框架
JUnit4的变化较大，建议看书了解。
框架运行顺序：
* setUpBeforeClass()
  * setUp()
    * testMethod1()
  * tearDown()
  * setUp()
    * testMethod2()
  * tearDown()
* tearDownAfterClass()

## 4. 测试什么？
6个需要测试的地方（Right-BICEP）：
* Right：结果是否正确（Right）；
* B：边界（Boundary）条件是否正确；
* I：能否检查反向（Inverse）关系；
* C：进行交叉检查（Cross-Check）的其他手段；
* E：强制错误（Error）条件发生；
* P：满足性能（Performance）的要求。

测试内容较多时，可以使用测试数据文件进行准备。但是使用文件后就没有测试代码看起来那么直观了，因此除非测试内容非常复杂，否则没有必要采用这样的方式。并且如果测试文件出现错误（作者书中就出现了数据错误），还会导致测试不通过，增加了维护的成本。

## 5.CORRECT（正确的）边界条件
* 一致性（Conformance）：值是否符合预期的格式；
* 有序性（Ordering）：一组值是否符合对排序的要求（有序性、无序性）；
* 区间性（Range）：值是否在合理取值范围内（在最小值与最大值之间）；
* 引用（Reference）-耦合性：代码是否引用了不受代码本身直接控制的外部因素；
* 存在性（Existence）：值是否存在（例如：非NULL，非零，包含于某个集合等等）
* 基数性（Cardinality）：是否恰好有足够的值；（也称为集合的势，即集合里面包含的元素个数）
* 时间性（Time）-绝对时间和相对时间：所有的事情是否按照顺序发生？是否在正确的时间发生？是否及时发生？

